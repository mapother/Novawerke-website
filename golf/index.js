(()=>{"use strict";var e,t={497:(e,t,o)=>{var n=o(437),i=o(888),s=o(728),a=o(24),r=o(417),d=o(509);window.three=n;let l=!0;"#debug"===window.location.hash&&(l=!0);let c=!1,p=!1;const w=document.getElementsByClassName("start-btn")[0],m=document.getElementsByClassName("loading-screen")[0],h=document.getElementsByClassName("loading-gif")[0],u=new n.LoadingManager;u.onLoad=()=>{console.log("loaded"),h.style.display="None",w.style.display="flex"};const g=document.querySelectorAll("audio"),f={width:window.innerWidth,height:window.innerHeight},y=new s.Z(u);y.setDecoderPath("./draco/");const b=new i.B(u);b.setDRACOLoader(y);const v=document.querySelector("canvas.webgl"),x=new n.Scene;window.scene=x;const S=new n.TextureLoader(u).load("./texture/grass.jpg");S.wrapS=8,S.wrapT=8,S.repeat.set(8,8);const O=new n.MeshStandardMaterial({map:S,side:n.FrontSide,normalMap:S}),E=new n.PlaneGeometry(100,100),M=new n.Mesh(E,O);M.lookAt(0,1,0),M.position.set(0,-.22,0),x.add(M);const C=new d.m;C.scale.setScalar(45e4);const L=n.MathUtils.degToRad(90),A=n.MathUtils.degToRad(180),P=(new n.Vector3).setFromSphericalCoords(1,L,A);C.material.uniforms.sunPosition.value=P,x.add(C);let j=null,k=new Array(3),R=new Array(3),T=null;b.load("./model/cart_baked.glb",(e=>{T=e,j=e.scene,j.scale.set(.35,.35,.35),j.position.set(3,0,-12),j.rotation.set(0,1.5,0);for(const e of j.children[0].children)if(e.name.startsWith("Club")){let t=Number(e.name[5])-1;e.isUp=!1,k[t]=e;const o=new n.Vector3;R[t]=o.copy(e.position)}x.add(j),window.bot=j}));let N=null;b.load("./model/standing_man.glb",(e=>{N=e;const t=e.scene;t.scale.set(2,2,2),t.position.set(4,0,-1),x.add(t)})),w.addEventListener("click",(()=>{m.style.top="-110vh",setTimeout((()=>{p=!0}),5e3),c=!0,j.mixers=[],T.animations.forEach((e=>{const t=new n.AnimationMixer(j),o=t.clipAction(e);o.setLoop(n.LoopOnce),o.clampWhenFinished=!0,o.play(),j.mixers.push(t)})),N.mixer=new n.AnimationMixer(N.scene);const e=N.mixer.clipAction(N.animations[0]);e.setLoop(n.LoopRepeat),e.play()}));const U=new n.PerspectiveCamera(45,f.width/f.height,.1,200);U.position.set(3,4,6.8),x.add(U),window.camera=U;let z=null;l&&(z=new a.N(U,v),z.enableDamping=!0,z.target.set(0,0,-10));const X=new n.WebGLRenderer({canvas:v});X.setSize(f.width,f.height),X.setPixelRatio(Math.min(window.devicePixelRatio,2)),X.outputEncoding=n.sRGBEncoding,X.setClearAlpha(0),X.setClearColor(0,0),X.shadowMap.enabled=!0;const Y=new n.Raycaster,Z=new n.Vector2;window.addEventListener("pointermove",(e=>{Z.x=e.clientX/window.innerWidth*2-1,Z.y=-e.clientY/window.innerHeight*2+1}));const V=new n.AmbientLight("#d3d3d3",.9);x.add(V);const W=new n.DirectionalLight("#d3d3d3",.8);function _(e){let t=Number(e[5])-1;k[t].isUp=!0,g.forEach((e=>{e.pause(),e.currentTime=0}));const o=new n.Vector3;o.copy(R[t]);const i=o.add(new n.Vector3(.3,0,.5));new r.K({posX:k[t].position.x,posY:k[t].position.y,posZ:k[t].position.z}).to({posX:i.x,posY:i.y,posZ:i.z}).onUpdate((e=>{k[t].position.set(e.posX,e.posY,e.posZ)})).easing(r.GS.Exponential.In).start(),g[t].play()}function B(e){let t=Number(e[5])-1;k[t].isUp=!1,new r.K({posX:k[t].position.x,posY:k[t].position.y,posZ:k[t].position.z}).to({posX:R[t].x,posY:R[t].y,posZ:R[t].z}).onUpdate((e=>{k[t].position.set(e.posX,e.posY,e.posZ)})).easing(r.GS.Exponential.In).start()}W.position.set(10,10,5),W.lookAt(new n.Vector3(0,0,0)),x.add(W),window.addEventListener("resize",(()=>{f.width=window.innerWidth,f.height=window.innerHeight,U.aspect=f.width/f.height,U.updateProjectionMatrix(),X.setSize(f.width,f.height),X.setPixelRatio(Math.min(window.devicePixelRatio,2))}));let F=!1;setTimeout((()=>{F=!0}),3e3);const G=new n.Clock;let D=0,q=0;const H=e=>{const t=G.getElapsedTime();if(q=t-D,D=t,l&&c&&(z.update(t),j&&j.mixers&&j.mixers.forEach((e=>{e.update(q)})),N.mixer.update(q)),j&&p){Y.setFromCamera(Z,U);const e=Y.intersectObjects(k);for(let t=0;t<e.length;t++)if(F){for(const o of k)o.name!=e[t].object.name&&B(o.name);if(e[t].object.isUp)break;_(e[t].object.name),F=!1,setTimeout((()=>{F=!0}),2e3)}}X.render(x,U),r.yo(e),window.requestAnimationFrame(H)};H()}},o={};function n(e){var i=o[e];if(void 0!==i)return i.exports;var s=o[e]={exports:{}};return t[e](s,s.exports,n),s.exports}n.m=t,e=[],n.O=(t,o,i,s)=>{if(!o){var a=1/0;for(c=0;c<e.length;c++){for(var[o,i,s]=e[c],r=!0,d=0;d<o.length;d++)(!1&s||a>=s)&&Object.keys(n.O).every((e=>n.O[e](o[d])))?o.splice(d--,1):(r=!1,s<a&&(a=s));if(r){e.splice(c--,1);var l=i();void 0!==l&&(t=l)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[o,i,s]},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={57:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var i,s,[a,r,d]=o,l=0;if(a.some((t=>0!==e[t]))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(d)var c=d(n)}for(t&&t(o);l<a.length;l++)s=a[l],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},o=self.webpackChunkgolf_3d=self.webpackChunkgolf_3d||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var i=n.O(void 0,[548],(()=>n(497)));i=n.O(i)})();
//# sourceMappingURL=index.js.map